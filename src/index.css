
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Glassmorphism Design System */
@layer base {
  :root {
    --background: 220 27% 8%;
    --foreground: 220 9% 93%;
    --card: 220 23% 11%;
    --card-foreground: 220 9% 93%;
    --popover: 220 23% 11%;
    --popover-foreground: 220 9% 93%;
    --primary: 263 70% 50%;
    --primary-foreground: 220 9% 93%;
    --secondary: 220 13% 18%;
    --secondary-foreground: 220 9% 93%;
    --muted: 220 13% 15%;
    --muted-foreground: 220 9% 46%;
    --accent: 263 70% 50%;
    --accent-foreground: 220 9% 93%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 220 9% 93%;
    --border: 220 13% 18%;
    --input: 220 13% 18%;
    --ring: 263 70% 50%;
    --radius: 0.75rem;
  }

  .light {
    --background: 220 23% 95%;
    --foreground: 220 27% 8%;
    --card: 220 50% 98%;
    --card-foreground: 220 27% 8%;
    --popover: 220 50% 98%;
    --popover-foreground: 220 27% 8%;
    --secondary: 220 13% 91%;
    --secondary-foreground: 220 27% 8%;
    --muted: 220 13% 88%;
    --muted-foreground: 220 9% 46%;
    --border: 220 13% 88%;
    --input: 220 13% 88%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-foreground min-h-screen;
    background-attachment: fixed;
  }
  
  .light body {
    @apply bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50;
  }
  
  /* Full height mobile optimization */
  html, body, #root {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for mobile */
    overflow: hidden;
  }
}

/* Glassmorphism Effects */
@layer components {
  .glass-panel {
    @apply backdrop-blur-xl bg-white/5 border border-white/10 rounded-2xl;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  }
  
  .light .glass-panel {
    @apply bg-white/40 border-white/20;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
  }
  
  .glass-input {
    @apply backdrop-blur-xl bg-white/5 border border-white/20 rounded-xl px-3 py-2;
    box-shadow: inset 0 2px 4px 0 rgba(31, 38, 135, 0.2);
  }
  
  .light .glass-input {
    @apply bg-white/60 border-white/40;
  }
  
  .neon-glow {
    box-shadow: 0 0 20px rgba(147, 51, 234, 0.3), 0 0 40px rgba(147, 51, 234, 0.1);
  }
  
  .message-bubble-user {
    @apply glass-panel bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-500/30;
  }
  
  .message-bubble-ai {
    @apply glass-panel bg-white/5 border-white/10;
  }
  
  .light .message-bubble-ai {
    @apply bg-white/60 border-white/30;
  }
  
  .typing-indicator {
    animation: pulse 1.5s ease-in-out infinite;
  }
  
  .floating-animation {
    animation: float 6s ease-in-out infinite;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  .slide-in-right {
    animation: slideInRight 0.5s ease-out;
  }
  
  .slide-in-left {
    animation: slideInLeft 0.5s ease-out;
  }
  
  @keyframes slideInRight {
    from { opacity: 0; transform: translateX(50px); }
    to { opacity: 1; transform: translateX(0); }
  }
  
  @keyframes slideInLeft {
    from { opacity: 0; transform: translateX(-50px); }
    to { opacity: 1; transform: translateX(0); }
  }

  /* Mobile-specific optimizations */
  @media (max-width: 640px) {
    /* Full screen mobile layout */
    .mobile-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 50;
      margin: 0.5rem;
      padding: 0.75rem;
      border-radius: 1rem;
    }
    
    .mobile-model-selector {
      position: fixed;
      top: 4rem;
      left: 0;
      right: 0;
      z-index: 40;
      margin: 0.5rem;
      padding-top: 0.5rem;
    }
    
    .mobile-input-area {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 50;
      margin: 0.5rem;
      padding: 0;
    }
    
    /* Message bubbles with proper text wrapping */
    .mobile-message-bubble {
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      max-width: calc(100vw - 4rem);
    }
    
    .mobile-message-content {
      word-break: break-word;
      white-space: pre-wrap;
    }
    
    /* Textarea and send button alignment */
    .mobile-textarea {
      font-size: 16px; /* Prevent zoom on iOS */
      line-height: 1.4;
      padding: 0.75rem;
      border-radius: 0.75rem;
    }
    
    .mobile-send-button {
      min-height: 44px;
      min-width: 44px;
      border-radius: 0.75rem;
    }
    
    /* Ensure proper spacing for fixed elements */
    body > div[id="root"] > div {
      padding-top: 6rem; /* Space for header + model selector */
      padding-bottom: 6rem; /* Space for input area */
    }
    
    /* Glass panels on mobile */
    .glass-panel {
      @apply rounded-xl;
      backdrop-filter: blur(16px);
    }
    
    .glass-input {
      @apply px-3 py-2 rounded-lg;
      backdrop-filter: blur(16px);
    }
    
    .message-bubble-user,
    .message-bubble-ai {
      @apply rounded-xl;
    }
    
    /* Better touch targets */
    button {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Prevent horizontal scroll */
    body {
      overflow-x: hidden;
    }
    
    /* Code blocks and long text wrapping */
    pre, code {
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
      max-width: 100%;
    }
    
    /* Ensure messages don't exceed container width */
    .message-bubble-user,
    .message-bubble-ai {
      max-width: calc(85vw - 2rem);
    }
  }

  /* Extra small mobile devices */
  @media (max-width: 480px) {
    .mobile-header {
      padding: 0.5rem;
      margin: 0.25rem;
    }
    
    .mobile-model-selector {
      top: 3.5rem;
      margin: 0.25rem;
    }
    
    .mobile-input-area {
      margin: 0.25rem;
    }
    
    /* Tighter spacing for very small screens */
    .space-x-2 > * + * {
      margin-left: 0.375rem;
    }
    
    .space-y-3 > * + * {
      margin-top: 0.5rem;
    }
    
    /* Smaller message bubbles */
    .mobile-message-bubble {
      max-width: calc(90vw - 1.5rem);
      padding: 0.5rem;
    }
    
    /* Adjust for smaller header */
    body > div[id="root"] > div {
      padding-top: 5rem;
      padding-bottom: 5.5rem;
    }
  }

  /* Landscape mobile optimization */
  @media (max-width: 768px) and (orientation: landscape) {
    .mobile-header {
      padding: 0.5rem;
    }
    
    .mobile-model-selector {
      display: none; /* Hide on landscape to save space */
    }
    
    body > div[id="root"] > div {
      padding-top: 4rem; /* Less top padding in landscape */
    }
  }
  
  /* Ensure touch targets are accessible */
  @media (hover: none) and (pointer: coarse) {
    button, 
    [role="button"], 
    input[type="button"], 
    input[type="submit"],
    textarea {
      min-height: 44px;
    }
    
    /* Better touch experience */
    button:active {
      transform: scale(0.95);
    }
  }
  
  /* Safe area handling for notched devices */
  @media (max-width: 640px) {
    .mobile-header {
      padding-top: max(0.75rem, env(safe-area-inset-top, 0.75rem));
    }
    
    .mobile-input-area {
      padding-bottom: max(0.5rem, env(safe-area-inset-bottom, 0.5rem));
    }
  }
}
